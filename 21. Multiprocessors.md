### 병렬컴퓨터 분류
- 시스템 구성 방법에 따른 분류
  - SMP
    - 64개 이하의 프로세서들을 가지는 중대형급 시스템
    - 완전 공유 구조 : 프로세서들이 시스템 내의 모든 자원 공유
    - 시스템 내에 하나의 OS만 존재
    - 대칭적(symmetric)
      - 모든 프로세서들이 필요 시 직접 OS 코드 수행
      - 모든 프로세서들이 자원들을 동등한 권한으로 사용
    - 특징
      - 능력이 비슷한 프로세서들로 구성
      - 프로세서들이 기억장치와 IO 장치들을 공유하며, 상호연결망에 의해 접속
      - 모든 프로세서들은 동등한 권한을 가지며, 같은 수준의 기능 수행
      - 프로세서간 통신은 공유 기억장치 이용
      - Job scheduling이 하나의 OS에 의해 통합적으로 이루어짐
      - 공유 자원의 경합으로 인해 시스템 크기에 한계
  - MPP
    - 무공유구조를 기반으로 하는 대규모 병렬처리 시스템
    - 수백 혹은 수천 개의 프로세싱 노드들로 구성
    - 간단한 구조의 노드 프로세서 사용
    - Micro-kernel 수준의 노드 Os 탑재
    - 노드들 간의 통신은 message-passing 방식
    - 복잡도 높은 상호연결망 이용
  - CC-NUMA(cache coherent)
    - 독립적인 노드들(UMA or NUMA)이 상호연결망에 의해 접속
    - 모든 노드들의 캐시 및 주기억장치들 사이에 데이터 일관성 유지
    - 시스템 내의 모든 기억장치들이 전역 주소공간을 가지는 분산 공유 기억장치 시스템으로 구성
    - 장점 : SW변경 없이 SMP 보다 더 큰 시스템 구축 가능
    - ![Alt text](/images/21-0.png)
  - 분산시스템
    - 독립적인 노드들이 전통적인 네트워크에 의해 접속
    - 노드들 간의 정보 교환 혹은 병렬처리를 수행할 때만 네트워크를 이용해 통신 : loosely-coupled system
    - 노드 : PC, workstation, SMP, MPP 혹은 그들의 조합
  - 클러스터 컴퓨터
    - A collection of PCs or workstations
    - 네트워크 : 고속 LAN 혹은 network switch
    - 모든 시스템 자원들을 단일 시스템 이미지(SSI) 로 통합
    - 장점
      - 저렴한 비용(기존 그대로 사용가능)으로 병렬처리시스템 구축 가능
      - 결함 대체 용이 - 가용성 향상
- 다중프로세서 시스템 구조
  - MIMD 조직으로서, 여러 개의 프로세서들이 비동기적으로 프로그램을 실행하는 시스템
  - 기억장치 모듈을 사용하는 방식에 따른 분류
    - 공유 기억장치 시스템
    - 분산 기억장치 시스템
  - 공유 기억장치 시스템
    - 밀결합 구조. 주기억장치가 어느 한 프로세서에 속해 있지 않고 모든 프로세서들에 의해 공유
    - 상호 연결 구조
      - 버스
        - 공유 버스
          - 하드웨어 간단. 버스 경합으로 인한 지연 시간 증가
          - 버스의 전송 속도를 높이거나 캐시를 사용해 성능 저하 보완
        - 다중 버스
          - 버스 경합을 줄이기 위해 버스의 수 증가
          - 계층 버스 구조 : 용도가 다른 여러 계층 버스 사용
          - ![Alt text](/images/21-1.png)
      - 크로스바 스위치
        - 프로세서들과 기억장치들 사이의 완전 연결성
        - 비용 많고 하드웨어 복잡
        - ![Alt text](/images/21-2.png)
          - 위와 같이 스위칭 소자에 의해 어느 메모리에 엑세스 할지 지정(자원 충돌 완화)
          - 고속 스위칭 소자가 많이 필요해서 비쌈.
      - 다단계 상호연결망(multistage interconnection network:MIN)
        - 크로스바 스위치의 기본 개념을 이용하면서도 하드웨어 복잡성을 감소시킨 상호연결망
        - ex) 오메가 네트워크(Omega network)
        - ![Alt text](/images/21-3.png)
          - 하나의 입력단에서 어디로들 데이터 전달 가능함.
          - 입력단 출력단을 2진수로 나타내서 XOR 연산을 하고 1이면 크로스, 0이면 직진하는 방식으로 사용 가능
          - ![Alt text](/images/21-4.png)
    - 장점
      - 프로세서들이 공통으로 사용하는 데이터들이 공유 기억장치에 저장되므로 별도의 프로세서간 데이터 교환 메커니즘이 필요하지 않음
      - 프로그램 실행시간 동안 각 프로세서들이 처리할 작업을 동적으로 균등히 할당 가능. 프로세서 이용률 극대화
    - 단점
      - 프로세서들과 기억장치 간의 통로상에 통신량이 많아 경합으로 인한 지연 시간 길어짐
      - 두 개 이상의 프로세서들이 공유자원을 동시에 사용하려는 경우에 한 개 이외의 프로세서들은 대기해야 함
        - 즉, 선형적인 성능 향상은 불가(고속 상호연결망과 캐시 기억장치의 사용으로 보완)
        - 근데 이경우 또 cache coherent 문제가 발생 가능
  - 분산기억장치 시스템 구조
    - 소결합 구조
    - 각 프로세서가 자신의 지역 기억장치 소유
    - 다른 프로세서들과의 통신은 메시지전송 이용
    - 장점 : 공유자원에 대한 경합 감소
    - 단점 : 통신 프로토콜에 의한 지연 시간 증가
    - 네트워크 지름(network diameter) : 네트워크 내에서 가장 멀리 떨어져 있는 노드들 간의 거리(즉, 링크의 수)
    - 구조
      - 선형 배열 구조
        - 네트워크 지름이 N-1로서, 다른 구조들에 비해 가장 길다
        - 버스 구조 보다 동시성이 더 높다
        - 통신 시간이 노드들 간의 거리에 따라 서로 다르며, 노드의 수가 많아지면 통신 시간이 매우 길어진다.
        - ![Alt text](/images/21-5.png)
      - 링 구조
        - 네트워크 지름
          - 각 링크가 양방향성이면 N/2
          - 단방향성이면 N-1
        - 변형 구조 : 코달 원형(chordal ring)
          - 링크의 수가 증가될수록 네트워크 지름은 감소
          - d(degree) : 각 노드가 가지는 링크의 수
        - ![Alt text](/images/21-6.png)
      - 트리 구조
        - 층의 수를 k라고 할 때 N = (2^k -1 )개의 노드들 접속
        - 네트워크 지름 = 2(k-1)
        - 시스템 요소들의 수가 증가함에 따라 성능이 선형적 향상
        - ![Alt text](/images/21-7.png)
      - 펫 트리(fat tree)구조
        - 상위 층으로 갈수록 노드간의 통신 채널 수 증가
        - 트리 구조에서 상위 층으로 올라갈수록 통신량 많아져서 채널이 병목되는 문제점 해결
        - Thinking Machine 사의 CM-5시스템에서 실제 사용
        - ![Alt text](/images/21-8.png)
          - 이와 같이 상위채널일수록 통신 채널 수 증가 시킴
      - 메시구조
        - 그물 형태
        - ![Alt text](/images/21-9.png)
        - 각각의 노드에서 통신선로를 지정할 수 있다.
        - 내부에서 스위칭 구조를 가져서 이동할 수 있다.
        - 위 예에서는 1-15로 가는 것이 가장 긴 네트워크 지름
      - 토러스 네트워크
        - 원형 구조와 메시구조가 혼합된 구조. 확장이 용이함
        - N*N토러스의 경우에 네트워크 지름은 2(N/2)
        - ![Alt text](/images/21-10.png)
      - 하이퍼큐브 네트워크
        - 상호연결 함수
        - ![Alt text](/images/21-11.png)
          - b는 이진수를 의미함. 각각의 노드를 2진수로 나타낸 것. 이것이 어떻게 연결되는지 규칙을 지정해 놓은 것이된다.
          - 각 축에 따라서 어느 위치를 NOT연산할지 결정.
        - 자동경로설정 방법
          - E-큐브 라우팅
            - 두 노드의 번호를 나타내는 2진수 비트들 간에 XOR 연산 수행하여 방향 단어를 구한다
            - 방향 단어의 LSB부터 검사하여, 비트값이 1이면 X방향, 0이면 이동하지 않는다.
            - MSB까지의 모든 비트들에 대해 2번을 차례로 반복하여, 대응되는 차원의 방향으로 이동할지를 결정
            - ex) 011 -> 101로 간다면, XOR연산하면 110이된다. zyx이므로 0인 x는 이동하지 않고, y,z는 1이므로 이동한다.
          - ![Alt text](/images/21-12.png)
          
