### 시스템버스
- 시스템 버스
  - 컴퓨터 시스템의 구성 요소들을 상호 연결해주는 중심 통로
  - 버스 : 구성 요소간 교환할 각종 정보를 전송하는 선들
  - 버스 선의 수
    - 한 번에 전송하는 데이터 비트들의 수, 기억장치 주소 비트들의 수 및 제어 신호들의 수에 따라 결정
    - 소형 컴퓨터 : 50 ~ 100 개의 신호선 이용
    - 중대형급 : 100 개의 이상의 신호선 사용
  - 종류
    - 데이터 버스
      - 시스템 요소들 사이에 데이터를 전송하는 데 사용되는 선의 집합
      - 양방향 전송
      - 버스 폭(선들의 수) = CPU와 기억장치 사이에 한 번에 전송되는 비트 수
    - 주소 버스
      - CPU가 기억장치로 (또는 그로부터) 데이터 쓰기(또는 읽기) 동작시 해당 기억장소를 지정하는 주소를 전송하기 위한 선들의 집합
      - 단방향 전송 : CPU -> 기억장치 및 I/O 제어기
      - 직접 주소 지정 할 수 있는 기억장소의 단위 : 바이트 혹은 단어 
    - 제어 버스
      - CPU와 기억장치 및 I/O장치 사이에 제어 신호들을 전송하는 선들의 집합
  - 주소버스의 폭에 따른 기억장치 용량 예
    - 주소 버스 = 16비트일 경우
      - 최대 기억장소는 2^16개(64K)
      - 바이트 단위 주소 자정일 경우 최대 기억장치 용량 = 64Kbyte
    - 24비트면
      - 2^24 이므로 16M
      - 바이트 단위 주소 지정시 최대 기억 장치 용량 = 16Mbyte
  - 제어버스의 주요 제어 신호
    - 메모리 쓰기 : 버스에 실린 데이터를 주소가 지정하는 기억장소에 저장되도록 하는 제어 신호
    - 메모리 읽기 : 주소가 지정하는 기억장소의 내용을 읽어서 버스에 실리도록하는 신호
    - 입출력 쓰기 : 버스에 실린 데이터를 입출력 장치로 출력되도록
    - 입출력 읽기 : 지정된 입출력 장치로부터 데이터를 읽어서 데이터 버스에 실리게 하는 제어 신호
    - 전송 확인 신호(transfer acknowledge) : 데이터 전송 동작이 완료되었음을 알리는 신호
  - 중재 버스(arbitration bus)
    - 버스 마스터 : 시스템 버스에 접속되는 요소들 중에서 버스 사용의 주체가 되는 요소들(CPU, 기억장치 모듈, I/O제어기 등)
    - 버스 중재기(bus arbitration) : 시스템 버스에 접속된 두 개 또는 그 이상의 버스 마스터들이 동시에 버스를 사용코자 할 경우 순서대로 한 개의 마스터씩 버스를 사용할 수 있게 해주는 동작
    - 중재 버스 : 버스 중재를 위한 신호 선들의 집합
      - 버스 요구 신호(bus request) : 버스 마스터가 버스 사용을 요구했음을 알리는 신호
      - 버스 승인(bus grant) 신호 : 버스 사용을 요구한 마스터에게 사용 허가하는 신호
      - 버스 사용중(bus busy)신호 : 현재 버스가 사용되고 있는 중임을 나타내는 신호
  - 인터럽트 버스
    - 인터럽트 매커니즘을 위한 제어 신호선들의 집합
    - 인터럽트 요구(interrupt request) 신호 : I/O 장치가 인터럽트를 요구했음을 알리는 신호
    - 인터럽트 확인 신호 : CPU가 인터럽트 요구를 인식했음을 알리는 신호
    - 그 이외
      - 버스 클럭(bus clock) : 동기식 버스에서 버스 동작들의 시작 시간을 일치시키기 위해 제공되는 공통 클럭 신호
      - 리셋 : 모든 시스템 요소들의 동작을 초기화 시키는 신호
  - 버스 대역폭
    - 버스의 속도를 나타내는 척도. 단위 시간당 전송가능한 데이터의 양. 버스 클럭의 주기에 의해 결정
    - ![Alt text](/images/14-0.png)
- 시스템 버스의 기본 동작
  - 쓰기 동작 순서
    - 버스 마스터가 버스 사용권 획득
    - 버스를 통해 주소와 데이터 및 쓰기 신호 전송
  - 읽기 동작 순서
    - 버스 마스터가 버스 사용권 획득
    - 주소와 읽기 신호를 보내고, 데이터가 전송되어 올 때까지 대기
  - 버스 동작의 타이밍에 따른 버스의 분류
    - 동기식 버스 : 시스템 버스에서 모든 버스 동작들이 공통의 버스 클럭을 기준으로 발생
    - 비동기식 버스 : 버스 동작들의 발생 시간이 관련된 다른 버스 동작의 발생 여부에 따라 결정
    - ![Alt text](/images/14-1.png)
    - 비동기식은 위와 같이 앞의 신호에 따라 다른 신호가 영향을 받음
    - 보통 빠른 장치들은 동기식 사용
    - 동기식은 인터페이스 회로가 간단하다. 그러나 주기가 가장 오래 걸리는 버스 동작의 소요 시간을 기준으로 결정되어, 클럭 주기보다 짧은 시간이 걸리는 버스 동작은 대기해야함
    - 비동기식은 각 버스 동작이 완료 즉시 연관 다음 동작이 발생하기에 동기식 버스에서와 같이 낭비되는 시간 없음. 그러나 연속적 동작 처리를 위해 인터페이스 회로 복잡함.
    - 소규모는 비동기식, 중형급 이상은 동기식 사용
- 버스 중재
  - 버스 경합(bus contention) : 한 개의 시스템 버스에 접속된 여러 개의 버스 마스터들이 동시에 버스 사용을 요구하는 현상
  - 버스 중재(bus arbitration) : 버스 경합이 발생시, 어떤 기준에 따라 버스 마스터들 중에서 한 개씩만 선택하여 순서대로 버스를 사용할 수 있게 해주는 동작
  - 버스 중재기(bus arbiter) : 버스를 중재하는 하드웨어 모듈
  - 중재 방식 분류
    - 연결 구조에 따른 분류
      - 병렬 중재 방식
        - 각 버스 마스터들이 독립적인 버스 요구 신호와 승인 신호 발생.
        - 버스 마스터들의 수와 같은 수의 버스 요구 선 및 승인 ㅅㄴ호 선 필요. 누가 요청했는지 바로 알 수 있다.
      - 직렬 중재 방식
        - 버스 요구와 신호 선이 각각 한 개씩만 존재하며, 각 신호 선을 버스 마스터들 간에 직렬로 접속하는 방식
    - 위치에 따른 분류
      - 중앙집중식 중재
        - 시스템 내에 버스 중재기가 한 개만 존재
        - 버스 마스터들이 발생하는 버스 요구 신호들은 하나의 중재기로 보내지고, 중재기는 정해진 중재원칙에 따라 선택한 버스마스터에게 승인신호 발생
      - 분산식 중재
        - 거의 사용되지 않음
        - 여러 개의 버스 중재기들이 존재. 버스 중재 동작이 각 마스터의 중재기에 의해 이루어짐
